function addEvent(t,e,a){t.addEventListener?t.addEventListener(e,function(t){a(t,t.target)},!1):t.attachEvent&&t.attachEvent("on"+e,function(t){a(t,t.srcElement)})}function shouldBeValidated(t){return!(t.getAttribute("readonly")||t.readonly)&&!(t.getAttribute("disabled")||t.disabled)&&(t.getAttribute("pattern")||t.getAttribute("required"))}function instantValidation(t){if(shouldBeValidated(t)){var e=t.getAttribute("required")&&!t.value||t.getAttribute("pattern")&&t.value&&!new RegExp(t.getAttribute("pattern")).test(t.value);!e&&t.getAttribute("aria-invalid")?t.removeAttribute("aria-invalid"):e&&!t.getAttribute("aria-invalid")&&t.setAttribute("aria-invalid","true")}}var fileStorage=[],totalSize=0;$(document).ready(function(){function t(t){return"number"!=typeof t?"":t>=1048576?(t/1048576).toFixed(2)+" Мб":(t/1024).toFixed(2)+" Кб"}function e(t){var e=!1;if(fileStorage.length>0)for(var a=0;a<fileStorage.length;a++)fileStorage[a].name===t&&(e=!0);return e}$("[data-fancybox]").fancybox({buttons:["close"]}),$("#navigation .navbar-nav li > a").click(function(t){$(".navbar-collapse").collapse("hide"),t.preventDefault();var e=$(this).attr("href"),a=$(e).offset().top;document.documentElement.clientWidth<=992?(a=a+$("#navbarLogo").outerHeight()-$(".navbar-collapse").outerHeight()-10,$("body, html").animate({scrollTop:a},700)):$("body, html").animate({scrollTop:a},700)}),$("#navigation .navbar-brand").click(function(t){t.preventDefault();var e=$(this).attr("href"),a=$(e).offset().top;$("body, html").animate({scrollTop:a},700)}),$("#services a").click(function(t){t.preventDefault();var e=$(this).attr("href");$(e).addClass("show");var a=$(e).offset().top;$("body, html").animate({scrollTop:a-$("#navigation").outerHeight()},700)}),$("a").click(function(t){$(this).blur()}),$("#calculate").click(function(){var t=0;$("#calc-body tbody tr").each(function(){var e;$(this).find(".td-price").each(function(){e=parseInt($(this).html())}),$(this).find("input").each(function(a,i){var n=parseInt($(i).val());isNaN(n)||(t+=n*e)})}),$("#total").text("Итого: "+t+" грн.")}),sections=$(".section"),nav=$(".navbar-nav"),$(window).on("scroll",function(){var t=$(this).scrollTop()+$("#navigation").outerHeight();t>=$("#top").outerHeight()?$("#navbarLogo").fadeIn():$("#navbarLogo").fadeOut(),sections.each(function(){var e=$(this).offset().top,a=e+$(this).outerHeight();t>=e&&t<=a?(nav.children(".nav-item").find("a").removeClass("active"),nav.children(".nav-item").find('a[href="#'+$(this).attr("id")+'"]').addClass("active")):nav.children(".nav-item").find('a[href="#'+$(this).attr("id")+'"]').removeClass("active")})}),$(".custom-file-input").each(function(){var a=$(this),i=(a.next("label").html(),["jpg","png","gif","doc","xls","docx","xlsx","pdf","zip","rar","7z"]),n=$("#contact-form ul"),o=$("#upload-message");a.on("click",function(){o.html("Макс. допустимый общий размер файлов - 25 Мб.")}),a.on("change",function(){if(this.files.length>0){for(var a=0;a<this.files.length;a++){var l=$('<li><p></p><p class="file-name"></p><span class="file-remove"><i class="fa fa-times"></i></span></li>');if(totalSize+this.files[a].size>26214400){o.html("Превышен макс. допустимый размер файлов!");break}-1!=$.inArray(this.files[a].name.substr(this.files[a].name.lastIndexOf(".")+1),i)?e(this.files[a].name)?o.html("Вы пытаетесь загрузить файл дважды!"):($("#attachments-list").css("display","block"),fileStorage.push(this.files[a]),totalSize+=this.files[a].size,l.find(".file-name").text(this.files[a].name),l.find("p").first().text(this.files[a].name).append(" <i>("+t(this.files[a].size)+")</i>"),l.appendTo(n).hide().fadeIn("normal")):o.html("Выбранный формат не поддерживается!")}$(this).wrap("<form></form>").closest("form").get(0).reset(),$(this).unwrap(),$(this).val("")}})}),$("#attachments-list").on("click",".file-remove",function(){for(var t=$(this).parent().find(".file-name").text(),e=$(this).closest("div"),a=0;a<fileStorage.length;a++)fileStorage[a].name==t&&(totalSize-=fileStorage[a].size,fileStorage.splice(fileStorage.indexOf(fileStorage[a]),1));$(this).parent().fadeOut("normal",function(){$(this).remove(),0==e.find("ul li").length&&e.css("display","none")})}),$("#privacy-link").on("click",function(){$("#privacy-policy").modal("show")})}),function(){"use strict";window.addEventListener("load",function(){for(var t=document.getElementById("contact-form"),e=[t.getElementsByTagName("input")],a=e.length,i=0;i<a;i++)for(var n=e[i].length,o=0;o<n;o++)addEvent(e[i][o],"change",function(t,e){instantValidation(e)});t.addEventListener("submit",function(e){if(e.preventDefault(),!0===t.checkValidity()){var a=new FormData($(t)[0]);if(fileStorage.length>0)for(a.delete("attachments[]"),i=0;i<fileStorage.length;i++)a.append("attachments[]",fileStorage[i]);$.ajax({type:"POST",url:"process.php",data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(){$("#submit-form").html('<i class="fa fa-circle-o-notch fa-spin"></i>')},success:function(e){$("#form-response .modal-body").html("<center>"+e+"</center>"),$("#form-response").modal("show"),t.reset(),fileStorage=[],$("#attachments-list").css("display","none").find("ul li").remove(),$("#contact-form label center").html('<i class="fa fa-paperclip" aria-hidden="true"></i> Прикрепить файлы'),$("#submit-form").html("Отправить"),console.log(e)}})}else $("#needs-validation").addClass("was-validated")},!1)},!1)}();